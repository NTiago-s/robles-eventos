---
import SectionContainer from "../components/SectionContainer.astro";
import Title from "../components/Title.astro";
import { FAQs } from "../utils/constans.js";
---

<SectionContainer
  id="faq"
  className="section-snap"
  style="background:linear-gradient(#000,#000b), url(/landing-img/imagen-1.jpg); background-position: center; background-size: cover;"
>
  <Title>Preguntas Frecuentes</Title>

  <article class="flex flex-col w-full gap-4">
    {
      FAQs.map(({ id, question, p1 }) => (
        <details
          class="faq-item p-2 border-2 open:[&>summary]:text-fuchsia-400 border-fuchsia-400/70 rounded-xl hover:bg-neutral-950 bg-neutral-900 transition w-full duration-300 cursor-pointer"
          data-id={id}
        >
          <summary class="text-sm sm:text-base marker:text-xs px-4 py-2">
            {question}
          </summary>
          <p class="text-xs sm:text-sm opacity-80 px-4 pb-4 my-2">{p1}</p>
          {/* {p2 && (
            <p class="text-xs sm:text-sm opacity-80 px-4 pb-4 my-2">{p2}</p>
          )} */}
        </details>
      ))
    }
  </article>

  <style>
    p {
      opacity: 0.8;
    }
  </style>

  <script>
    document.addEventListener("astro:page-load", () => {
      const faqItems = document.querySelectorAll(".faq-item");

      faqItems.forEach((item) => {
        item.addEventListener("click", (e) => {
          e.preventDefault();

          const isOpen = item.hasAttribute("open");

          faqItems.forEach((el) => el.removeAttribute("open"));

          if (!isOpen) {
            item.setAttribute("open", "");
          }
        });
      });
    });
  </script>
</SectionContainer>
